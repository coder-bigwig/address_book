1.背景
在日常生活中，人们需要管理大量的联系人信息，包括姓名、电话号码、邮箱地址、家庭住址等。为了方便用户高效地存储、管理和查找联系人信息，开发一个个人通讯录管理系统显得尤为重要。该系统将提供一个便捷的工具，帮助用户轻松管理自己的社交网络和重要联系人。
2.需求分析和设计
2.1需求分析
本个人通讯录管理系统旨在提供一个全面、高效的联系人信息管理解决方案，以满足用户在日常生活中对联系人数据存储、检索、更新和维护的需求。通过对现有代码的分析，系统主要实现了以下核心功能：
联系人信息管理：系统支持对联系人基本信息的增、删、改、查操作。每个联系人包含唯一的编号（ID）、姓名、电话号码、邮箱地址和住址。此外，系统还引入了“黑名单”功能，允许用户标记特定联系人，这为后续的联系人筛选和管理提供了便利。
数据持久化：系统采用MySQL数据库作为后端存储，确保联系人数据的持久化存储和管理。通过JDBC技术，系统能够与数据库进行交互，实现数据的安全存储和高效检索。
多界面支持：系统提供了两种用户交互界面：命令行界面（CLI）和图形用户界面（GUI）。命令行界面提供基本的文本交互功能，方便用户通过输入指令进行操作；图形用户界面则通过Swing库构建，提供更直观、友好的视觉操作体验，包括表格展示、表单输入和按钮操作等。
联系人搜索功能：系统支持根据姓名或电话号码进行模糊查询，用户可以通过输入关键字快速查找符合条件的联系人，提高了信息检索的效率。
错误处理与用户反馈：系统在数据库操作和用户输入处理中包含了基本的错误捕获机制，例如，当数据库连接失败或用户输入无效时，系统会给出相应的提示信息，增强了系统的健壮性和用户体验。
2.2设计
本系统采用分层设计思想，主要包括以下几个核心类及其相互关系：
Contact 类：作为数据模型层，Contact类封装了联系人的基本属性，包括id（整型，唯一标识）、name（字符串）、phone（字符串）、email（字符串）、address（字符串）以及isBlacklisted（布尔型，表示是否在黑名单）。该类实现了Serializable接口，以便于对象的序列化和反序列化。它提供了相应的getter和setter方法，以及toString方法用于方便地打印联系人信息。
ContactDao 类：作为数据访问层（DAO），ContactDao类负责与MySQL数据库进行交互，实现对Contact对象的CRUD（创建、读取、更新、删除）操作。该类管理数据库连接，并提供了addContact、deleteContact、updateContact、getContact（按ID查询）、getAllContacts（获取所有联系人）和searchContacts（模糊查询）等方法。它还负责在系统启动时创建contacts表（如果不存在）。
ContactService 类：作为业务逻辑层，ContactService类封装了核心业务逻辑，协调ContactDao和用户界面之间的交互。它提供了更高级别的操作方法，如addContact、deleteContact、updateContact、getContact、getAllContacts和searchContacts。这些方法在调用ContactDao的方法之前，可能会进行一些数据验证或业务规则检查，从而将业务逻辑与数据访问逻辑分离，提高了代码的可维护性和可扩展性。
ContactManager 类：作为命令行界面（CLI）的入口点，ContactManager类提供了基于文本的用户交互菜单。它通过Scanner类获取用户输入，并根据用户的选择调用ContactService中相应的方法来执行操作。该类负责显示菜单、处理用户选择、收集用户输入以及展示操作结果。
ContactManagerGUI 类：作为图形用户界面（GUI）的入口点，ContactManagerGUI类使用Java Swing库构建了可视化的用户界面。它包含了JTable用于显示联系人列表，JTextField用于输入联系人信息和搜索关键字，以及JButton用于触发各种操作。该类通过事件监听器响应用户的交互，并调用ContactService中的方法来更新数据和刷新界面。它还包含了对表格数据的排序功能和右键菜单操作。

3.系统实现与测试
3.1 系统实现
本个人通讯录管理系统主要采用 Java 语言进行开发，结合面向对象编程思想，实现了联系人信息的有效管理。系统在数据持久化方面选择了 MySQL 数据库，并通过 Java Database Connectivity (JDBC) 技术实现了应用程序与数据库之间的数据交互。用户界面则提供了两种形式：基于命令行的交互界面（CLI）和基于 Swing 的图形用户界面（GUI），以满足不同用户的使用习惯和场景需求。
核心模块与技术栈：
Java 语言： 作为主要的开发语言，Java 的跨平台特性和强大的面向对象能力为系统的稳定性和可扩展性提供了基础。通过合理地划分类和接口，实现了模块化开发，提高了代码的复用性和可维护性。
MySQL 数据库： 选用 MySQL 作为后端数据库，用于存储联系人的结构化数据。MySQL 具有高性能、高可靠性和易于使用的特点，能够有效地管理大量的联系人信息。数据库中创建了 contacts 表，用于存储联系人的 id、name、phone、email、address 和 is_blacklisted 等字段。
JDBC (Java Database Connectivity)： JDBC 是 Java 应用程序连接和操作数据库的标准 API。在 ContactDao 类中，通过 JDBC 实现了与 MySQL 数据库的连接、SQL 语句的执行以及结果集的处理。这包括了联系人的添加（INSERT）、删除（DELETE）、修改（UPDATE）和查询（SELECT）等核心数据库操作。
Java Swing： 对于图形用户界面，系统采用了 Java Swing 库。Swing 提供了一套丰富的 GUI 组件，如 JFrame（窗口）、JTable（表格）、JTextField（文本框）、JButton（按钮）和 JCheckBox（复选框）等。ContactManagerGUI 类负责构建和管理这些组件，并通过事件监听器响应用户的交互，例如点击按钮、选择表格行等，从而实现直观、友好的用户操作体验。
系统功能实现细节：
1.联系人数据模型 (Contact.java)：
o定义了 Contact 类，作为联系人信息的载体。每个 Contact 对象包含联系人的唯一编号、姓名、电话、邮箱、地址以及一个布尔类型的 isBlacklisted 字段，用于标记联系人是否在黑名单中。
o实现了 Serializable 接口，支持对象的序列化，为未来可能的数据存储或传输需求提供了便利。
o提供了完整的 getter 和 setter 方法，确保了数据封装性和可控性。
2.数据访问层 (ContactDao.java)：
oContactDao 类是系统与数据库交互的核心。在构造函数中，它负责加载 MySQL JDBC 驱动并尝试建立数据库连接，同时检查并创建 contacts 表。
oaddContact 方法：将新的联系人信息插入到 contacts 表中。值得注意的是，该方法在插入后会获取数据库自动生成的 id，并将其设置回 Contact 对象，确保 Contact 对象的 id 与数据库中的 id 保持一致。
odeleteContact 方法：根据联系人 id 从数据库中删除对应的记录。
oupdateContact 方法：根据联系人 id 更新数据库中联系人的各项信息，包括姓名、电话、邮箱、地址和黑名单状态。
ogetContact 方法：根据联系人 id 查询并返回单个 Contact 对象。
ogetAllContacts 方法：从数据库中检索所有联系人信息，并以 List<Contact> 的形式返回。
osearchContacts 方法：实现了模糊查询功能，允许用户根据姓名或电话号码的关键字来搜索联系人，使用了 SQL 的 LIKE 操作符。
3.业务逻辑层 (ContactService.java)：
oContactService 类作为业务逻辑层，封装了对 ContactDao 的调用，并提供了更高级别的业务操作接口。
o它负责协调数据访问和用户界面之间的逻辑，例如在添加、修改联系人时，可以进行数据格式验证（尽管当前代码中验证逻辑较少，但此层是实现这些验证的理想位置）。
o所有对联系人数据的操作都通过 ContactService 进行，实现了业务逻辑与数据访问的解耦。
4.命令行界面 (ContactManager.java)：
oContactManager 类是系统的命令行入口。它通过 main 方法启动，并循环显示操作菜单，引导用户进行选择。
o用户可以通过输入数字来选择添加、删除、修改、查询、列出所有联系人或搜索联系人等操作。
o该类通过 Scanner 获取用户输入，并调用 ContactService 的相应方法来执行业务逻辑，然后将结果反馈给用户。
5.图形用户界面 (ContactManagerGUI.java)：
oContactManagerGUI 类构建了系统的可视化界面。它继承自 JFrame，创建了一个主窗口。
o界面布局采用了 BorderLayout 和 GridLayout 等布局管理器，将搜索、输入、操作按钮和联系人列表（JTable）等组件合理地组织起来。
oJTable 用于动态显示联系人数据，其数据模型 DefaultTableModel 允许方便地添加、删除和更新行。
o按钮（如“添加”、“更新”、“删除”、“清空”、“搜索”）绑定了事件监听器，当用户点击时，会触发相应的业务逻辑调用 ContactService 的方法，并更新 JTable 的显示。
o实现了表格的排序功能，用户可以点击表头对联系人列表进行升序或降序排列。
o右键菜单功能增强了用户体验，允许用户在表格中选中联系人后，通过右键快速进行“更新”或“删除”操作。
o黑名单复选框的加入，使得用户在添加或修改联系人时，可以直接设置其黑名单状态。
通过上述模块的协同工作，本系统能够有效地管理个人通讯录信息，并提供了友好的用户交互方式。

3.2系统测试
本系统在开发过程中进行了多轮测试，以确保各项功能符合预期，并能够稳定运行。测试主要分为单元测试和集成测试，覆盖了联系人管理的各项核心功能以及用户界面的交互逻辑。以下是部分关键测试用例的详细描述和测试结果：
测试环境：
操作系统：Windows 11/ Windows 7
Java 版本：JDK 8 或更高版本
数据库：MySQL 8.0
开发工具：IntelliJ IDEA / Eclipse
